{% extends "base.html" %}

    {% block header_nav%}
        <div class="liens_page">
            {% if current_user.estPreparateur %}
            <a href="#">gérer les stocks</a>
            {% else %}
            <a href="/">liste des produits</a>
            {% endif %}
            <a href="/preparation/reservations" id="lien_reservation"> liste des réservations</a>
        </div>
    {% endblock %}

    {% block top_main %}
        {% if current_user.estPreparateur %}
            <button id="ajouter_prod" type="submit"><img src="{{url_for('static', filename='images/ajouter_prod.png')}}" alt ="i"> Ajouter un produit </button>
        {% else %}
            <h1>Liste des produits</h1>
        {% endif %}
        <form  action="{{ url_for('search') }}" method="GET">
            <input class="barre_recherche" type="search" placeholder="Nom produit/famille" aria-label="Search" name="search" id="search">
        </form>
    {% endblock %}

    {% block content %}
        <ul>
            {% for produit in liste_produit %}
                <li>
                    <div class="produit">
                        <section class="popup">

                            <!-- popup réserver -->
                            <div id="popup-overlay" style="display: none;">
                                <div id="popup-content">
                                    <p>Quantité en Stock : {{ produit.stock }}</p>
                                    <p> Quantité réservé </p>
                                    <input type="number", placeholder="Quantité">
                                    <button>+1</button>
                                    <button>+10</button>
                                    <button>+100</button>
                                    <button>+1000</button>
                                    <button>Réserver</button>
                                    <a href="javascript:void(0)">Annuler</a>
                                </div>
                            </div>

                            <!-- popup supprimer un produit mot de passe -->
                            <div id="popup-overlay" style="display: none;">
                                <div id="popup-content">
                                    
                                </div>
                            </div>

                            <!-- popup supprimer un produit confirmation -->
                            <div id="popup-overlay" style="display: none;">
                                <div id="popup-content">
                                    
                                </div>
                            </div>
                        </section>

                        {% if current_user.estPreparateur %}
                            <button class="supp_produit"><img src="{{url_for('static', filename='images/supp_produit.png')}}"></button>
                        {% endif %}
                        <!-- <img src="{{url_for('static', filename='images/'+produit.nomProduit)}}" alt="img du produit"> -->
                        <p>{{produit.nomProduit}}<button class="info_prod" data-produit="{{ produit.idProduit }}"><img src="{{url_for('static', filename='images/info_produit.png')}}" alt ="info produit"></button></p>
                        {% if produit.disponible %}
                            <p>Disponible</p>
                            <div class="bouton">
                                {% if current_user.estPreparateur %}
                                    <button class="Modifier"> Modifier </button>
                                {% endif %}
                                    <button class="Reserver"> Reserver </button>
                            </div>
                        {% else %}
                            <p>Indisponible</p>
                            <div class="bouton">
                                {% if current_user.estPreparateur %}
                                <button class="Modifier" > Modifier </button>
                                {% endif %}
                                <button href="#" class="famille"> Produits de la même famille </button>
                            </div>

                        {% endif %} 
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% endblock %}

